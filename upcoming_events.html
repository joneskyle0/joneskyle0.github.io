<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upcoming Events</title>
    <link rel="stylesheet" href="styles.css">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>
<body>
    <header>
        <h1>Trivia with Kyle</h1>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="trivia_cup.html">Season 2 Scores</a>
        <a href="upcoming_events.html">Upcoming Topics</a>
    </nav><div id="next-event">
        <p>My next event is at <span id="event-location"></span> on <span id="event-date"></span> at <span id="event-time"></span>. The topic(s) will be <span id="event-topic"></span>.</p>
    </div>
    </div>
    <div class="table-responsive">
        <table class="upcoming-events">
            <thead>
                <tr>
                    <th class="header">Location</th>
                    <th class="header">Date</th>
                    <th class="header">Time</th>
                    <th class="header">Topic</th>
                </tr>
            </thead>
        <tbody>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>1/03/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Game of Thrones</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>1/10/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Marvel</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>1/17/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Breaking Bad</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>1/24/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Parks and Recreation (TV)</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>1/31/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Zoo Night</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>2/07/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>Video Games</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>2/14/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>2/21/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>2/28/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>3/06/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>3/13/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
            <tr>
                <td><a href="https://maps.app.goo.gl/jBxnuXqzXdZQZxFQ8">Ellison Brewery and Spirits</a></td>
                <td>3/20/2024</td>
                <td>7:00 PM and 8:00 PM</td>
                <td>TBA</td>
            </tr>
        </tbody>
    </table>
</div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function(){
          // Initialize DataTable with "datetime-moment" sorting
          $('.upcoming-events').DataTable({
            columnDefs: [
              {
                type: 'datetime-moment',
                targets: 1,
                render: function (data, type, row) {
                  if (type === 'sort') {
                    return moment(data, 'M/D/YYYY').valueOf();
                  }
        
                  // Find the next event
                  var currentDate = moment(); // Get the current date and time
                  var tableData = $('.upcoming-events').DataTable().data(); // Get the table data
                  var nextEvent = null;
        
                  for (var i = 0; i < tableData.length; i++) {
                    var eventDate = moment(tableData[i][1], 'M/D/YYYY');
                    var eventTime = tableData[i][2];
                    var eventTopic = tableData[i][3];
                    var eventLocation = $(tableData[i][0]).text().trim(); // Extract and trim the text after the tag
        
                    if (eventDate.isSameOrAfter(currentDate, 'day')) {
                      nextEvent = {
                        date: eventDate.format('M-D-Y'),
                        time: eventTime,
                        topic: eventTopic,
                        location: eventLocation
                      };
                      break; // Exit the loop after finding the next event
                    }
                  }
        
                  if (nextEvent) {
                    document.getElementById('event-location').textContent = nextEvent.location;
                    document.getElementById('event-date').textContent = nextEvent.date;
                    document.getElementById('event-time').textContent = nextEvent.time;
                    document.getElementById('event-topic').textContent = nextEvent.topic;
                  }
        
                  return moment(data, 'M/D/YYYY').format('M-D-Y');
                }
              }
            ],
            searching: false
          });
          $('.dataTables_length').hide();
        });
        </script>  
</body>
</html>